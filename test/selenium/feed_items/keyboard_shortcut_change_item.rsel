load File.join(RAILS_ROOT, 'test', 'selenium_helper.rb')

setup :fixtures => [:users, :feed_items]

feed_item_2, feed_item_1 = FeedItem.find(3, 4)

login
open "/feed_items"

dont_see_element "#feed_item_#{feed_item_1.id}.selected"
assert_not_visible "open_feed_item_#{feed_item_1.id}"
dont_see_element "#feed_item_#{feed_item_2.id}.selected"
assert_not_visible "open_feed_item_#{feed_item_2.id}"

key_press "css=body", "j"
see_element "#feed_item_#{feed_item_1.id}.selected"
assert_visible "open_feed_item_#{feed_item_1.id}"
dont_see_element "#feed_item_#{feed_item_2.id}.selected"
assert_not_visible "open_feed_item_#{feed_item_2.id}"

key_press "css=body", "j"
dont_see_element "#feed_item_#{feed_item_1.id}.selected"
assert_not_visible "open_feed_item_#{feed_item_1.id}"
see_element "#feed_item_#{feed_item_2.id}.selected"
assert_visible "open_feed_item_#{feed_item_2.id}"

key_press "css=body", "k"
see_element "#feed_item_#{feed_item_1.id}.selected"
assert_visible "open_feed_item_#{feed_item_1.id}"
dont_see_element "#feed_item_#{feed_item_2.id}.selected"
assert_not_visible "open_feed_item_#{feed_item_2.id}"

key_press "css=body", "k"
see_element "#feed_item_#{feed_item_1.id}.selected"
assert_visible "open_feed_item_#{feed_item_1.id}"
dont_see_element "#feed_item_#{feed_item_2.id}.selected"
assert_not_visible "open_feed_item_#{feed_item_2.id}"
