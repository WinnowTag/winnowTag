page.call 'itemBrowser.hideLoadingIndicator'

page.call "itemBrowser.setTotalItems", @tags_count

@tags.each_with_index do |tag, index|
  content = tag.user == current_user ? 
    render_to_string(:partial => 'tag.html.erb', :locals => {:tag => tag}) :
    render_to_string(:partial => 'subscribed_tag.html.erb', :locals => {:subscribed_tag => tag})
  
  page.call 'itemBrowser.insertItem', dom_id(tag), params[:offset].to_i + index, content
end
