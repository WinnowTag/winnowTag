<div id="<%= dom_id(public_tag) %>" class="tag public clearfix <%= tag_classes(public_tag) %>">
  <div class="summary clearfix" onclick="$(this).next('.extended').toggle()">        
    <div class="training">      
      <div class="details">
        <p><!-- <span>Author</span> --> <%= public_tag.user.display_name %></p>
        <strong class="state"><%= tag_state(public_tag) %></strong>
      </div>
      <div class="positive">
        <p>Positive</p>
        <strong><%= public_tag.positive_count %></strong>
      </div>
      <div class="negative">
        <p>Negative</p>
        <strong><%= public_tag.negative_count %></strong>
      </div>
      <div class="automatic">
        <p>Automatic</p>
        <strong><%= public_tag.classifier_count %></strong>
      </div>
      <div class="date">
         <p><%= _(:tags_last_trained) %></p> 
         <strong><%= format_date(public_tag.last_used_by) %></strong>
      </div>
    </div>    
    
    <div class="info">      
      <h4><%= tag_name_with_tooltip(public_tag) %></h4>

      <div class="description">
        <%= public_tag.comment %>
      </div>
    </div>
  </div> <!-- /.summary -->
  
  <div class="extended" style="display:none">  
    <div class="comments clearfix">
      <% if public_tag.comments.empty? -%>
        <div class="empty">There are no comments for this tag.</div>
      <% else -%>
        <%= render :partial => "comments/comment.html.erb", :collection => public_tag.comments %>
      <% end -%>
      
      <div class="block comment_form clearfix">
        <h5>Add a comment:</h5>
        <% form_remote_for :comment, :url => comments_path do |form|  -%>
          <%= form.hidden_field :tag_id, :value => public_tag.id %>
          <%= form.text_area :body %>
          <%= submit_tag 'Submit' %>
        <% end -%>
      </div> <!-- /.comment_form -->
    </div> <!-- /.comments -->
      
    <div class="sidebar">      
      <div class="block actions clearfix">
        <h5>Actions</h5>
        <ul class="controls">
          <li class="first"><%= bias_slider(public_tag, :disabled => true) %></li>
          <li><%= globally_exclude_check_box(public_tag) %> <%= _(:tags_globally_exclude) %></li>
          <li>
      			<%= check_box_tag dom_id(public_tag, "subscribe"), "1", current_user.subscribed?(public_tag), :disabled => current_user == public_tag.user,
      						:onclick => remote_function(:url => subscribe_tag_path(public_tag), :method => 'put', :with => "{ subscribe: this.checked }") %> <%= _(:tags_subscribe) %>
          </li>
          <li><%= link_to _(:show), feed_items_path(:anchor => "tag_ids=#{public_tag.id}"), :class => 'view_icon', :title => _(:tags_show_link_title, public_tag.name) %></li>
          <li><%= link_to_remote _(:copy), :url => tags_path(:copy => public_tag), :with => "{name: name}", :condition => %W|name = prompt("Name:", "#{public_tag.name} - copy")|, :html => { :title => _(:tags_copy_link_title, public_tag.name), :class => "duplicate_icon" } %></li>
          <li><%= link_to "Trained Items", feed_items_path(:anchor => "tag_ids=#{public_tag.id}&mode=moderated"), :class => "view_icon" %></li>
          <li><%= link_to _(:tags_feed_link), url_for(:user => public_tag.user, :tag_name => public_tag.name, :action=> 'show', :format => :atom), :class => "feed_icon" %></li>
        </ul>
      </div> <!-- /.actions -->
    </div>
  </div> <!-- /.extended -->
</div>